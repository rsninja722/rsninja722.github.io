t=document.getElementById("cvs"),a=t.getContext("2d");a.imageSmoothingEnabled=!1;var e=t.width,r=t.height;class h{constructor(t,a){this.x=t,this.y=a,this.ad=Math.random()>.5,this.aa=[],this.ae=this.ad,this.ab=0}static arr=[];static init(){for(var t=0;t<r;t++){for(var a=[],i=0;i<e;i++)a.push(new h(i,t));h.arr.push(a)}}static update(){var t=h.arr[0].length,i=h.arr.length;if(e>t)for(var s=0;s<i;s++)for(var n=t;n<e;n++)h.arr[s].push(new h(n,s));if(r>i)for(s=i;s<r;s++){var o=[];for(n=0;n<e;n++)o.push(new h(n,s));h.arr.push(o)}if(r<i){h.arr.splice(r);for(n=0;n<e;n++)h.arr[r-1][n].aa=[]}if(e<t)for(s=0;s<r;s++)h.arr[s].splice(e),h.arr[s][e-1].aa=[];var g=a.createImageData(e,r),c=0;for(s=0;s<r;s++)for(n=0;n<e;n++){(v=h.arr[s][n]).step()}for(s=0;s<r;s++)for(n=0;n<e;n++){var v;(v=h.arr[s][n]).step2();var f=v.color;g.data[c]=f[0],g.data[c+1]=f[1],g.data[c+2]=f[2],g.data[c+3]=f[3],c+=4}a.putImageData(g,0,0)}step(){this.ab++;var t=0;for(var a of this.ac)a.ad&&t++;this.ad?(t<2||t>3)&&(this.ae=!1,this.ab=0):3===t&&(this.ae=!0,this.ab=0)}step2(){this.ad=this.ae}get ac(){if(0===this.aa.length)for(var t of[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]]){var a=this.x+t[0],i=this.y+t[1];a<0||i<0||a>=e||i>=r||this.aa.push(h.arr[i][a])}return this.aa}get color(){var t=1/Math.pow(this.ab,.5)*255;return this.ad?[0,Math.max(t,150),Math.max(t,150),255]:[0,0,t/3,255]}}h.init(),setInterval((function(){t.height=window.innerHeight/3,t.width=window.innerWidth/3,e=t.width,r=t.height,h.update()}),30)