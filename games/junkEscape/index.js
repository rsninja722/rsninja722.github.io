images = [
    "assets/images/",
    "test1.png",
    "test2.png",
    "backTest.png",
    "objTest.png",
    "p.png",
    [
        "modules/",
        [
            "top/",
            [
                "stock/",
                "stockHead.png",
                "stockBody.png",
                "stockLegs.png",
                [
                    "SL_000","0.png","1.png","2.png","3.png","4.png","5.png"
                ]
            ],
            [
                "spider/",
                "Sp0.png","Sp1.png","Sp2.png","Sp3.png"
            ],
            [
                "hover/",
                "Hv0.png","Hv1.png","Hv2.png","Hvoff.png"
            ],
            [
                "Saw/Asw_00",
                "00.png","01.png","02.png","03.png","04.png","05.png","06.png","07.png","08.png","09.png","10.png","11.png"
            ],
            [
                "Mono-Barrel/ABB_000",
                "0.png","1.png","2.png","3.png"
            ],
            [
                "Eyes/EYES_",
                "dual_green.png",
                "dual_grey.png",
                "dual_yellow.png",
                "mono_cyan.png",
                "quad_purple.png"
            ],
            "Eyes/Head.png",
            [
                "Body_",
                "THIN.png",
                "BULK.png",
                "STOCK.png"
            ],
            [
                "MNGN_000",
                "0.png",
                "1.png",
                "2.png"
            ],
            [
                "plasma/PLSM_000",
                "0.png","1.png","2.png","3.png","4.png"
            ],
            [
                "shotGun/SHTG_000",
                "0.png","1.png","2.png","3.png","4.png","5.png"
            ]
        ],
        [
            "side/",
            [
                "40_",
                "blaster.png",
                "bulkbody.png",
                "hover.png",
                "knife.png",
                "Plasma.png",
                "saw.png",
                "Shotgun.png",
                "spider.png",
                "stockbody.png",
                "stockroller.png",
                "tank.png",
                "thinbody.png",
                "minigun.png"
            ],
            [
                "Eyes/",
                "Dual_Green.png",
                "Dual_Grey.png",
                "Dual_Yellow.png",
                "Mono_Cyan.png",
                "Quad_Purple.png"
            ]
        ],
        "Arms_Skeleton.png",
        "Base_Skeleton.png",
        "Body_Skeleton.png",
        "Eyes_Skeleton.png",
        "highlight0.png",
        "highlight1.png"
    ],
    [
        "background/",
        [
            "1/",
            "back1.png",
            "LV1_Lamp0.png","LV1_Lamp1.png","LV1_Lamp2.png","LV1_Lamp3.png",
            "LV1_LED0.png","LV1_LED1.png","LV1_LED2.png",
            "LV1_Exit.png",
            "Ship0.png","Ship1.png","Ship2.png",
            [
                "ShipSmoke/",
                "SS-0.png","SS-1.png","SS-2.png","SS-3.png","SS-4.png","SS-5.png","SS-6.png","SS-7.png","SS-8.png","SS-9.png","SS-10.png","SS-11.png"
            ]
        ],
        [
            "2/",
            "back2.png",
            "lamp0.png","lamp1.png","lamp2.png",
            "lamp.png",
            "led0.png","led1.png","led2.png",
            "gatesLVL2.png",
            "lightsLVL2.png"
        ],
        [
            "3/",
            "back3.png",
            "LVL3_Lamps_0000.png","LVL3_Lamps_0001.png","LVL3_Lamps_0002.png",
            "LVL3_LEDS_0000.png","LVL3_LEDS_0001.png","LVL3_LEDS_0002.png",
            "Spores_0000.png","Spores_0001.png","Spores_0002.png","Spores_0003.png",
            "LVL3_Plants.png",
            "LVL3_EnterExit.png"
        ],
        [
            "4/",
            "back4.png",
            "LVL4_Panel_0000.png","LVL4_Panel_0001.png","LVL4_Panel_0002.png",
            "LVL4_LED_0000.png","LVL4_LED_0001.png","LVL4_LED_0002.png",
            "LVL4_Shingles.png",
            "LVL4_EnterExit.png"
        ],
        [
            "5/",
            "back5.png",
            "LVL5_Lamps_0000.png","LVL5_Lamps_0001.png","LVL5_Lamps_0002.png",
            "LVL5_LEDS_0000.png","LVL5_LEDS_0001.png","LVL5_LEDS_0002.png",
            "LVL5_EnterExit.png",
            "Lamp_asset_Dual.png",
            [
                "Bubbles/LVL5_BBLS_",
                "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png"
            ]
        ],
        [
            "end/",
            "back6.png",
            "LVL6_EnterExit.png",
            "LVL6_quadlamps.png",
            "LVL6_quadlamps_2.png"
        ],
        [
            "7/",
            "back7.png",
            "LVL7_Lamps.png",
            "LVL7_Enter.png",
            "LVL7_Factory.png",
            [
                "laz/LZRBM_",
                "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png","21.png"
            ]
        ]
    ],
    [
        "enemies/",
        [
            "tank/tank",
            "0.png","1.png","2.png","3.png","4.png"
        ],
        [
            "clapper/Hm-",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png"
        ],
        [
            "spin/Sw-",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png"
        ],
        [
            "turret/",
            "Tr_0.png","Tr_1.png","Tr_2.png","Tr_3.png","Tri_Turret_Head.png","Turret_Base.png","Turret_Spotlight.png"
        ],
        [
            "quad/",
            "Qu_0.png","Qu_1.png","Qu_2.png","Qu_3.png","quadHead.png","quadBase.png","quadLight.png"
        ],
        [
            "Throw/TRW_",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png","12.png","13.png"
        ],
        [
            "gunner/GNR_000",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png"
        ],
        [
            "plasma/",
            "TRIPLASMA_0000.png","TRIPLASMA_0001.png","TRIPLASMA_0002.png","TRIPLASMA_0003.png","TRIPLASMA_0004.png",
            "BOSS_HOVER_0000.png","BOSS_HOVER_0001.png","BOSS_HOVER_0002.png",
            "BOSS_TRIPOD.png",
            "BOSS_HEAD.png",
        ],
        [
            "parts/part",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png"
        ],
        "m-on.png",
        "m-off.png",
        "b-on.png",
        "b-off.png",
        "t-on.png",
        "t-off.png"
    ],
    [
        "bullets/",
        "bullet0.png",
        "shot1.png",
        "shot2.png",
        "shot3.png",
        "mini.png",
        "plas0.png",
        "plas1.png",
        "plas2.png",
        "shell.png",
        "gold.png"
    ],
    [
        "particles/",
        "spark.png",
        "plasma.png",
        "case.png",
        "smoke.png",
        "shotTrail.png"
    ],
    [
        "overlays/",
        [
            "glitch/",
            [
                "Blue_Haze_000",
                "0.png","1.png","2.png","3.png"
            ],
            [
                "Grey_Haze_000",
                "0.png","1.png","2.png","3.png"
            ]
        ],
        [
            "dmg/",
            [
                "DMG_000",
                "0.png","1.png","2.png","3.png"
            ]
        ]
    ],
    [
        "ui/",
        "TRS_BKG.png",
        "TRS2_Jerry.png",
        "TRS3_Text.png",
        "TRS3_BKG.png",
        "healthBar.png",
        "hp.png",
        "UI_0.png",
        "UI_1.png",
        "warn.png",
        "curs.png",
        "leave.png",
        [
            "scan/",
            [
                "SCAN_Base_000","0.png","1.png","2.png","3.png"
            ],
            [
                "SCAN_text_","ARMS.png","BASE.png","BODY.png","SENS.png"
            ],
            "SCAN_txt.png"
        ]
    ],
    [
        "font/",
        "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png"
    ],
    [
        "booms/",
        [
            "EXP1/EXP1_",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png","12.png","13.png","14.png"
        ],
        [
            "EXP2/EXP2_",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png","12.png","13.png","14.png"
        ],
        [
            "EXP4/EXP4_",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png"
        ],
        [
            "EXP5/EXP5_",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png"
        ],
        [
            "EXP6/EXP6_",
            "0.png","1.png","2.png","3.png","4.png"
        ],
        [
            "EXP7/EXP7_",
            "0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png","12.png","13.png"
        ]
    ]
];

audio = [
    "assets/audio/",
    "s.wav",
    "slice0.mp3",
    "slice1.mp3",
    "slice2.mp3",
    "slice3.mp3",
    "clap0.mp3",
    "clap1.mp3",
    "clapBack.mp3",
    "bigBoom0.mp3",
    "bigBoom1.mp3",
    "bigBoom2.mp3",
    "roll.mp3",
    "warn.wav",
    "open.wav",
    "close.wav",
    "switch.wav",
    "gun0.mp3",
    "gun1.mp3",
    "gunr.mp3",
    "shot.mp3",
    "shotr.mp3",
    "saw.mp3",
    "sawing.mp3",
    "buzz.mp3",
    "buzzing.mp3",
    "mini.mp3",
    "miniOne.mp3",
    "miniFast.mp3",
    "plasboom.wav",
    "plasHit.wav",
    "plasma.wav",
    "spid.mp3",
    "hov.mp3",
    "hit.mp3",
    "oof.mp3",
    "intro.mp3",
    "gg.mp3",
    "land.wav"
];

var count = 0;

var transitionTime = 0;
var darkTime=0;

var over = 0;
var effect = 0;

var leaveTime = 0;

var exps = [];

//collision cache
var col;
var sx;
var sy;

//multipliers

var screenShake=0;


var block={x:0,y:0,w:10,h:10};
var circ={x:0,y:0,r:5};
var select = 0;
var world=[]; 

var pauseTime = 0;
function update() {
    if(!playingCut) {
    if(pauseTime==0) {
        
    col = curLvl.collision;
    sx = curLvl.size.x;
    sy = curLvl.size.y;

    for(let i=0;i<4;i++) {
        if(player.damaged[i]>0) {
            player.damaged[i]--;
        }
    }
    for(let i=0;i<4;i++) {
        if(player.damaged[i]>0) {
            if(Math.round(player.damaged[i]/10)%2) {
                if(player.damaged[i]/10==parseInt(player.damaged[i]/10)) {play(sounds.warn);}
                img(sprites.warn,164+(i*70),34);
            }
        }
    }
    cameraMovement();
    //     if(keyDown[k.LEFT]) {moveCamera(-5,0);}
    //     if(keyDown[k.RIGHT]) {moveCamera(5,0);}
    //     if(keyDown[k.UP]) {moveCamera(0,-5);}
    //     if(keyDown[k.DOWN]) {moveCamera(0,5);}

    if(transitionTime>0) {
        transitionTime--;
    }
    if(transitionTime==100) {
        switchLevel(level+1);
    }
    if(transitionTime == 98) {
        // for(let i=0;i<4;i++) {
        //     if(level==player.modules[i][1]) {
        //         player.modules[i][5]();
        //         player.damaged[i] = 350;
        //     }
        // }
    }
    if(darkTime>0) {
        darkTime--;
    }
    if(darkTime==100) {
        enemies=[];
        bullets=[];
        particles=[];
        parts=[];
        player.v={x:0,y:0};
        miniSpeed=15;
        player.health=player.maxHealth;
        var l = levels[level];
        player.x = l.entrance.x;
        player.y = l.entrance.y;
        for(let i=0;i<l.enemies.length;i++) {
            let ee = l.enemies[i];
            enemies.push( new enemy(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5],ee[6],ee[7],ee[8]));
        }
    }
    if(level==6) {
        cutCount++;
    }
    if(cutCount>540&&cutCount<565) {
        cutOffs[0]+=2;
        cutOffs[1]+=2;
        cutOffs[2]+=2;
        cutOffs[3]+=2;  
        cutOffs[4]+=3;  
    }
    if(cutCount>564) {
        cutOffs[4]+=3; 
    }
    if(cutCount==575) {
        darkTime=200;
    }
    if(cutCount>=675) {
        playingCut=true;
        document.getElementById("end").style = "display:block;";
        document.getElementById("end").onended = function () {
            document.getElementById("end").style = "display:none;";
        }
        document.getElementById("end").play();
    }
    
    if(!transitionTime&&!darkTime) {
        playerMovement();

        playerUpdate();

        //enemies
        for(var i=0;i<enemies.length;i++) {
            if(enemies[i].update(i)) {
                enemies.splice(i,1);
                for(let j=0;j<bullets.length;j++) {
                    for(let h=0;h<bullets[j].hitList.length;h++) {
                        if(bullets[j].hitList[h] == i) {
                            bullets[j].hitList.splice(h,1);
                        }
                    }
                }
                i--;
            }
        }

        updateParts();

        //bullets
        for(var i=0;i<bullets.length;i++) {
            if(bullets[i].update()) {
                bullets.splice(i,1);
                i--;
            }
        }

        //particles
        for(var i=0;i<particles.length;i++) {
            if(particles[i].update()) {
                particles.splice(i,1);
                i--;
            }
        }

        if(count%2) {
            for(var i=0;i<exps.length;i++) {
                if(exps[i].time>0) {
                    exps[i].time--;
                } else {
                    exps.splice(i,1);
                    i--;
                }
            }
        }
        count++;
    }

    var mp = mousePosition();
    block.x = mp.x;
    circ.x = mp.x;
    block.y=mp.y;
    circ.y=mp.y;
    if(keyPress[k.v]) {
        var fstr="";
        for(var i=0;i<world.length;i++) {
            if(world[i].r!==undefined) {
                fstr += `{x:${Math.round(world[i].x)},y:${Math.round(world[i].y)},r:${Math.round(world[i].r)}},`;
            } else {
                fstr += `{x:${Math.round(world[i].x)},y:${Math.round(world[i].y)},w:${Math.round(world[i].w)},h:${Math.round(world[i].h)}},`;
            }
        }
        console.log(fstr)
    }
    if(mousePress[2]) {
        if(select==0) {
            world.push({x:block.x,y:block.y,w:block.w,h:block.h});
        } else {
            world.push({x:circ.x,y:circ.y,r:circ.r});
        }
    }
    if(select==0) {
        if(keyDown[k.z]) {
            block.w += keyDown[k.x] ? scroll*5 : scroll;
        } else {
            block.h += keyDown[k.x] ? scroll*5 : scroll;
        }
    } else {
        circ.r += keyDown[k.x] ? scroll*5 : scroll;
    }
    if(keyPress[k.c]) {
        if(select==0) {select=1;} else if(select==1) {select=0;}
    }

    if(count%7==0) {
        if(over>-1) {
            over--;
        }
    }
    if(leaveTime<=0&&enemies.length==0&&level!==6) {
        leaveTime=rand(30,45);
    }
    if(leaveTime>0) {
        leaveTime-=0.0166;
        if(leaveTime<1) {
            switchLevel(level+1);
            leaveTime=0;
        } 
    }
    sawTime++;
    } else {
        pauseTime --;
    }
    }
}

function draw() {
    if(screenShake>0) {
        var shake = rand(0,1) ? -5 : 5;
        if(rand(0,1)) {
            if(rand(0,1)) {
                camera.x += shake;
            } else {
                camera.x += shake/2;
                camera.y += shake/2;
            }
        } else {
            if(rand(0,1)) {
                camera.y += shake;
            } else {
                camera.y -= shake/2;
                camera.x -= shake/2;
            }
        }
        screenShake--;
    }
    //background image
    imgIgnoreCutoff(sprites[curLvl.backGround],curLvl.size.x/2,curLvl.size.y/2);

    bottomMapDraw();

    drawParts();

    //modules
    for(var i=0;i<items.length;i++) {
        items[i].draw();
    }

    


    //bullets
    for(var i=0;i<bullets.length;i++) {
        bullets[i].draw();
    }

    //enemies
    for(var i=0;i<enemies.length;i++) {
        enemies[i].draw();
    }


    //player
    drawPlayer();

    //particles
    for(var i=0;i<particles.length;i++) {
        particles[i].draw();
    }

    for(var i=0;i<exps.length;i++) {
        switch(exps[i].type) {
            case "big1":
                img(sprites[`EXP1_${14-exps[i].time}`],exps[i].x,exps[i].y);
                break;
            case "big2":
                img(sprites[`EXP2_${14-exps[i].time}`],exps[i].x,exps[i].y);
                break;
            case "big3":
                img(sprites[`EXP2_${14-exps[i].time}`],exps[i].x,exps[i].y);
                break;
            case "med1":
                img(sprites[`EXP4_${6-exps[i].time}`],exps[i].x,exps[i].y);
                break;
            case "med2":
                img(sprites[`EXP5_${6-exps[i].time}`],exps[i].x,exps[i].y);
                break;
            case "small":
                img(sprites[`EXP6_${4-exps[i].time}`],exps[i].x,exps[i].y);
                break;
            case "plas":
                img(sprites[`EXP7_${13-exps[i].time}`],exps[i].x,exps[i].y);
                break;
        }
    }

    topMapDraw();

    // if(select==0) {
    //     rect(block.x,block.y,block.w,block.h,"blue");
    // } else {
    //     circle(circ.x,circ.y,circ.r,"blue");
    // }

    // var col = curLvl.collision;
    // for(var i=0;i<col.length;i++) {
    //     if(col[i].r!==undefined) {
    //         circle(col[i].x,col[i].y,col[i].r,"blue");
    //     } else {
    //         rect(col[i].x,col[i].y,col[i].w,col[i].h,"blue");
    //     }
    // }
    
}

function absoluteDraw() {
    switch(player.modules[0][0]) {
        case 1:
            imgIgnoreCutoff(sprites[`Grey_Haze_0000`],cw/2,ch/2);
            break;
        case 2:
            imgIgnoreCutoff(sprites[`Blue_Haze_000${Math.round(count/25)%4}`],cw/2,ch/2);
            break;
    }
    imgIgnoreCutoff(sprites[`UI_${Math.round(count/50)%2}`],cw/2,ch/2);
    // imgIgnoreCutoff(sprites.warn,616,114);
    // imgIgnoreCutoff(sprites.warn,616,172);
    // imgIgnoreCutoff(sprites.warn,616,230);
    // imgIgnoreCutoff(sprites.warn,616,288);
    for(let i=0;i<4;i++) {
        if(player.damaged[i]>0) {
            if(Math.round(player.damaged[i]/10)%2) {
                img(sprites.warn,164+(i*70),34);
            }
        }
    }
    player.modules[0][2](164,34);
    player.modules[1][2](234,34);
    player.modules[2][2](304,34);
    player.modules[3][2](374,34);

    //img(sprites[`DMG_WARNING${(Math.round(count/50)%2)}`],86,44);

    imgIgnoreCutoff(sprites[`SCAN_Base_000${Math.round(count/5)%4}`],550,160,0,1,(zoomTime/50<1?zoomTime/50:1));
    if(zoomTime>50&&!transitionTime&&mi!=undefined) {
        imgIgnoreCutoff(sprites.SCAN_txt,550,160);
        switch(items[mi].m[4]) {
            case "head":
                imgIgnoreCutoff(sprites.SCAN_text_SENS,550,160);
                // zoom
                text(`zoom: ${items[mi].m[8]}`,480,215,"#cfcfcf",2);
                // name
                text(`${items[mi].m[7]}`,480,245,"#cfcfcf",2);
                items[mi].m[6](550,125,0,2);
                break;
            case "body":
                imgIgnoreCutoff(sprites.SCAN_text_BODY,550,160);
                text(`${items[mi].m[9]}`,480,215,"#cfcfcf",2);
                text(`health:${items[mi].m[0]}`,480,245,"#cfcfcf",2);
                items[mi].m[6](550,125,0,2);
                break;
            case "arms":
                imgIgnoreCutoff(sprites.SCAN_text_ARMS,550,160);
                text(`${items[mi].m[7]}`,480,215,"#cfcfcf",2);
                items[mi].m[6](550,125,0,1.5);
                break;
            case "legs":
                imgIgnoreCutoff(sprites.SCAN_text_BASE,550,160);
                text(`${items[mi].m[9]}`,480,215,"#cfcfcf",2);
                text(`top speed:${moveSpeeds[items[mi].m[0]*2]}`,480,245,"#cfcfcf",2);
                items[mi].m[6](550,125,0,1.5);
                break;
        }   
    }

    if(over>-1) {
        imgIgnoreCutoff(sprites[`Grey_Haze_000${over}`],cw/2,ch/2);
    }

    let h = player.health/player.maxHealth
    if(h<0.2) {
        imgIgnoreCutoff(sprites.DMG_0003,cw/2,ch/2);
    } else if(h<0.4) {
        imgIgnoreCutoff(sprites.DMG_0002,cw/2,ch/2);
    } else if(h<0.6) {
        imgIgnoreCutoff(sprites.DMG_0001,cw/2,ch/2);
    } else if(h<0.9) {
        imgIgnoreCutoff(sprites.DMG_0000,cw/2,ch/2);
    } 
    if(leaveTime>0) {
        imgIgnoreCutoff(sprites.leave,57.5,450);
        let t = Math.floor(leaveTime).toString();
        if(t.length==2) {
            img(sprites[`${t[0]}`],40,460);
            img(sprites[`${t[1]}`],52,460);
        } else {
            img(sprites[`${t[0]}`],52,460);
        }
    }
    
    if(cutCount>499) {
        var t = Math.round((cutCount-500)/3);
        t=t>21?21:t;
        img(sprites[`LZRBM_${t}`],cw/2,ch/2);
    }
    //{x: 218, y: 398}
    if(transitionTime) {
        if(transitionTime>100) {
            let t = (100 - (transitionTime - 100)) / 100;
            curCtx.globalAlpha=t;
            rect(cw/2,ch/2,cw,ch,"black");
        } else {
            let t = (transitionTime) / 100;
            curCtx.globalAlpha=t;
            rect(cw/2,ch/2,cw,ch,"black");
        }
        curCtx.globalAlpha=1;
    }
    if(darkTime) {
        if(darkTime>100) {
            let t = (100 - (darkTime - 100)) / 100;
            curCtx.globalAlpha=t;
            rect(cw/2,ch/2,cw,ch,"black");
        } else {
            let t = (darkTime) / 100;
            curCtx.globalAlpha=t;
            rect(cw/2,ch/2,cw,ch,"black");
        }
        curCtx.globalAlpha=1;
    }
    if(cutCount>150&&cutCount<500) {
        let t = (cutCount - 100) / 100;
        if(cutCount>450) {
            t=(500-cutCount)/50;
        }
        t=t>1?1:t;
        curCtx.globalAlpha=t;
        img(sprites.TRS3_BKG,cw/2,ch/2);
        img(sprites.TRS_BKG,cw/2,ch/2,0,1,t);
        img(sprites.TRS3_Text,cw/2,ch/2,0,1,t);
        img(sprites.TRS2_Jerry,cw/2,ch/2);
        curCtx.globalAlpha=1;
    }
    
}

function onAssetsLoaded() {
    transitionTime=99;
    switchLevel(0);
    setVolume(sounds.s,0.25);
    setVolume(sounds.clap0,0.3);
    setVolume(sounds.clap1,0.3);
    setVolume(sounds.clapBack,0.5);
    setVolume(sounds.slice0,0.5);
    setVolume(sounds.slice1,0.5);
    setVolume(sounds.slice2,0.5);
    setVolume(sounds.slice3,0.5);
    setVolume(sounds.bigBoom0,0.5);
    setVolume(sounds.bigBoom1,0.5);
    setVolume(sounds.bigBoom2,0.5);
    setVolume(sounds.roll,1.9);
    setVolume(sounds.warn,0.1);
    setVolume(sounds.open,0.1);
    setVolume(sounds.close,0.1);
    setVolume(sounds.gun0,0.5);
    setVolume(sounds.gun1,0.5);
    setVolume(sounds.gunr,0.5);
    setVolume(sounds.shot,0.5);
    setVolume(sounds.shotr,0.5);
    setVolume(sounds.saw,0.1);
    setVolume(sounds.sawing,0.1);
    setVolume(sounds.buzz,0.2);
    setVolume(sounds.buzzing,0.2);
    setVolume(sounds.miniOne,0.2);
    setVolume(sounds.miniFast,0.2);
    setVolume(sounds.mini,0.5);
    setVolume(sounds.plasma,0.5);
    setVolume(sounds.plasboom,0.5);
    setVolume(sounds.plasHit,0.5);
    setVolume(sounds.spid,1);
    setVolume(sounds.hit,0.5);
    setVolume(sounds.hov,0.5);
    setVolume(sounds.land,0.5);
    setVolume(sounds.gg,0.2);
    setType(sounds.gg,"bgm");

    volume.sfx=0.5;
    volume.bgm=0.5;

    sounds.gg.nodes[1].loop = true;
    play(sounds.gg);

    cursor.sprite = sprites.curs;
    document.getElementById("intro").style = "display:block;";
    document.getElementById("intro").onended = function () {
        document.getElementById("intro").style = "display:none;";
        playingCut=false;
    }
    play(sounds.intro);
    document.getElementById("intro").play();
}
var playingCut=true;

setup(60);  